<!DOCTYPE html>
<html lang="zxx">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>__TEMPLATE__</title>

  <link rel="stylesheet" href="color.css"/>
  <link rel="stylesheet" href="font.css"/>
  <link rel="stylesheet" href="syntax.css"/>
  <style type="text/css">
* { box-sizing: border-box; }

body
{
  margin: 0;
  padding: 0;
  background-color: hsla(210 11% 50% / 1);
}

code
{
  width: 100vw;
  height: 100vh;
  color: white;
}
  </style>
</head>

<body class="body">

  <code id="code">
    /**
     * Use an `a` as button to click without closing
     */
    note_link__s:
      link_a =>
      {
        let link_s = `<${C_o.NOTE_LINK_TAG_s} class="note_link_a">`
        link_a.forEach( atlink_s =>
          {
          let [ act_s, icon_s, ...arg_a ] = atlink_s.split( ',' )
          let parameter_s = ''
          icon_s = icon_s.trim()
          arg_a.forEach( arg_s => parameter_s += `${arg_s.trim()},` )
          link_s += `<a class="note_link" role="button" tabindex="0"
          data-method="${act_s}" data-param="${parameter_s.slice( 0, -1 )}">${S_o.symbol__s( icon_s )}</a>`
        } )
        return `${link_s}</${C_o.NOTE_LINK_TAG_s}>`
      }
      ,
      
      
    //#code=01
    code_block__s:
    content_s =>
      {
        let [ content_a, content_o ] =
        SPLIT__a
          (
            content_s,
            '_code_block'
            )
        let safe_s =
          content_a[1]
            //?? .replace
            //??   (
            //??     /\n\n+/g, '\n<br/>\n'  //: avoid Markdown <p> insert
            //??   )
          .trim()
        const title_s =
        content_o
            .title_s
            .charAt(0) === '#' ?  //: # for nonlink title
              content_o
              .title_s
                .slice(1)    //: strip starting '#' char
            :
            F_o.codeUrl__s( content_o.title_s )
        const code_s =
          CODE_o
            .highlight__s
            (
              safe_s,
              content_o.lang_s
            )
        return `<pre data-id="code"><code data-id="code" class="language-${content_o.lang_s}">${code_s}</code></pre>
    <div data-id="code_ref"><dl data-id="code_ref"><dt>${title_s}</dt>
    <dd><a href="https://prismjs.com" target="_blank" title="Highlighting provided by Prism.js">Prism</a></dd>
    </dl></div>`    //: `pre` and `div` as wrappers for full width `code` and `dl`
      }
      ,
    //#code=01
    


    module.exports = make_o =>
    {
      [ 'note_link',
        'code'
    ].forEach( code_s => make_o.addNunjucksShortcode( `${code_s}`, arg_ => CODES_o[ `${code_s}__s` ]( arg_ ) ) ),
    
      [ 'anchor',
        'note_txt',
        'note_img',
        'code_block',
        'replace_all',
        'more_to_come'
      ].forEach( code_s => make_o.addPairedShortcode( `_${code_s}`, ( content_s, arg_ ) => CODES_o[ `${code_s}__s` ]( content_s, arg_ ) ) )
    }
  </code>

  <script src="H.js" defer></script>
  <script src="R.js" defer></script>
  <script src="U.js" defer></script>
  <script src="syntax.js" defer></script>
  <script>
  </script>
</body>

</html>
